# jpg-contract
總管家收付款憑單文件合成

上傳 至少 5 張、最多 6 張 圖片，支援 拖曳排序，自動排版為 兩頁 A4（#1–#3 為第 1 頁，#4–#6 為第 2 頁），並可下載 單張 PNG 或 兩頁 PDF。

網頁端工具，免安裝、免上傳伺服器（所有處理都在瀏覽器本機完成）

適合將收付款憑單/合約/存摺封面等資料，快速整理成列印或歸檔用格式

✨ 功能特色

✅ 一次選擇 5–6 張圖片（JPG/PNG/WebP/TIFF）

✅ 拖曳排序 縮圖卡片，立即控制版面先後

✅ 一鍵輸出：PNG（2480×7016） 或 PDF（A4 × 2 頁）

✅ 圖片自動等比縮放、置中顯示，留白處理

✅ 純前端運作，不會上傳任何圖片到外部伺服器

🖼️ 版面規則

以 A4（2480×3508 px, 300dpi） 為單位

第 1 頁：排序 #1 → #3

第 2 頁：排序 #4 → #6（若 #6 缺則留白）

兩頁合併 PNG 的尺寸為 2480 × 7016 px

🚀 快速開始

下載本專案的 index.html 放到任何靜態主機（含 GitHub Pages）。

用瀏覽器開啟頁面：

點「選擇圖片」一次挑 5–6 張

在縮圖清單 拖曳 調整順序

按「合成預覽」

視需要「下載 PNG」或「下載 PDF」

提示：PDF 尺寸為真正的 A4 × 2 頁、可直接列印；PNG 為兩頁上下堆疊的一張長圖。

🌐 部署到 GitHub Pages

建立新 Repo（例如 receipt-merger）。

將 index.html 放在 repo 根目錄（不需要其他檔案）。

進入 Settings → Pages：

Source：Deploy from a branch

Branch：main / 根目錄

儲存後等幾秒，即可獲得 Pages 網址。

🛠️ 技術細節

前端技術：Vanilla JS + <canvas>

PDF 輸出：使用 jsPDF
（CDN 載入）

影像載入：createImageBitmap（現代瀏覽器支援佳）

隱私：所有處理皆在使用者瀏覽器記憶體中進行

⚙️ 自訂與擴充

打開 index.html 可調整以下常數：

// 影像張數限制
const MAX = 6; 
const MIN = 5;

// A4 尺寸（像素, 300dpi）
const A4_W = 2480, A4_H = 3508;


常見自訂方向：

列高比例：目前每頁 3 列平均分配，可改成上大下小等比例（修改 rowHeights 或每列高度邏輯）。

浮水印/頁眉頁腳：在輸出前用 canvas 繪制文字或圖示即可。

影像壓縮：PNG 下載時可改為 JPEG（較小檔），或在 PDF 內調整 JPEG 品質（目前為 0.95）。

🧪 瀏覽器支援

近期版本的 Chrome / Edge / Firefox / Safari

行動裝置可使用，但大量/超高像素圖片時，記憶體吃重建議在桌面端操作

❗ 已知限制 & 小提醒

EXIF 方向：部分相機/手機照片含旋轉資訊，若出現方向不正，請先在相簿「旋正」後再上傳（或可擴充程式加入 EXIF 自動旋轉）。

超大圖片：非常高解析度的圖片可能造成記憶體壓力，建議先適度壓縮。

TIFF：瀏覽器對 TIFF 的支援度不一，建議轉成 JPG/PNG 再使用。

🧰 疑難排解（FAQ）

看不到縮圖/無法預覽？
確認檔案格式為圖片檔，且瀏覽器版本更新到近兩期。

PDF 很大？
可在 pdf.addImage(pageX.toDataURL('image/jpeg', 0.8), ...) 中調低品質（0.8、0.7 等），或先壓縮輸入圖片。

PNG 想用 JPEG？
將 toBlob(..., 'image/png') 改為 'image/jpeg'，並加入品質參數。

📄 授權

MIT License
